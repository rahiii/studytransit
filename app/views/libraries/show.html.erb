<% content_for :title, @library.name %>

<% if notice %>
  <div class="notice"><%= notice %></div>
<% end %>

<% if alert %>
  <div class="alert"><%= alert %></div>
<% end %>

<header class="detail-header">
  <%= link_to libraries_path, class: "back-arrow" do %>
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M19 12H5M12 19l-7-7 7-7"/>
    </svg>
  <% end %>
  <h1 class="library-title"><%= @library.name.upcase %></h1>
</header>

<main class="spaces-container">
  <% @library.spaces.each do |space| %>
    <% form_space = defined?(@space) && @space.id == space.id ? @space : space %>
    <section class="space-section">
      <div class="space-card">
        <div class="space-name"><%= space.name %></div>
        <div class="occupancy-indicators">
          <% (space.capacity || 0).times do %>
            <span class="person-icon">ğŸ‘¤</span>
          <% end %>
        </div>
      </div>
      
      <div class="capacity-section">
        <h3 class="capacity-title">Add Capacity</h3>
        <div class="current-capacity">Current Capacity: <%= space.capacity ? "#{space.capacity}/5" : "Not set" %></div>
        <% if form_space.errors[:capacity].any? %>
          <div class="alert capacity-error"><%= form_space.errors[:capacity].to_sentence %></div>
        <% end %>
        <%= form_with model: [@library, form_space], class: "capacity-form" do |form| %>
          <%= form.number_field :capacity, min: 1, max: 5, placeholder: "Enter capacity (1-5)", class: "capacity-input" %>
          <%= form.submit "Update Capacity", class: "capacity-submit" %>
        <% end %>
      </div>
    </section>
  <% end %>
</main>

<footer class="app-footer">
  <button class="footer-icon" aria-label="Search">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <circle cx="11" cy="11" r="8"></circle>
      <path d="m21 21-4.35-4.35"></path>
    </svg>
  </button>
  <button class="footer-icon" aria-label="Lock">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
      <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
    </svg>
  </button>
</footer>
